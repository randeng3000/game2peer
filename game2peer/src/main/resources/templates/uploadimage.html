<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
 <head>
        <title>UploadImageFile</title>
 <style th:fragment="css" type="text/css">
      #infscr-loading {
        position: fixed;
        text-align: center;
        bottom: 30px;
        left: 47%;
        z-index: 100;
        background: white;
        background: hsla( 0, 0%, 100%, 0.9 );
        padding: 20px;
        color: #222;
        font-size: 15px;
        font-weight: bold;
        -webkit-border-radius: 10px;
           -moz-border-radius: 10px;
                border-radius: 10px;
      }
      .col-center-block {  
	    float: none;  
	    display: block;  
	    margin-left: auto;  
	    margin-right: auto;  
      } 
       #more{
		display:block!important;
		border-radius:10px; 
		-moz-border-radius:10px; 
		-webkit-border-radius:10px; 
		border: 1px solid #ddd; 
		background: #EFEFEF;
		box-shadow: 2px 2px 2px rgba(50,50,50,0.4); 
		color: #444; 
		text-decoration: none;
		width:60%;
		margin:0 auto; 
		margin-top:10px;
		padding: 3px;
		text-align: center;
		}
		.imgli{
		border: 1px solid #1abb9c;
		border-radius: 3px;
		}
		.imginfo{
		padding-left: 2px;
		margin-top: 5px;
		}
		.imgdel{
		margin-top: 7px;
		float:right;
		border: none;
		margin-right: 0px;
		width:auto;
		}
</style>
 </head>
 <body>
   <div th:fragment="content">
	  <div class="offset"></div>
		<div class="light-wrapper">
		   <div class="container inner">
			    <div class="section-title-wrapper">
			    <div class="alert alert-warning" role="alert" th:if="${errorMessage}">
                   <span th:utext="#{${errorMessage}}"></span>
		        </div>
				<form class="form-inline" th:action="@{/pages/g/uploadimage.shtml}" enctype="multipart/form-data" method="post">
				  <div class="form-group">
				    <label for="imgfile" th:text="#{请选择图像文件}">File input</label>
				    <input class="form-control" id="imgfile" name="imgfile" type="file" accept="image/*"/>
				    <button type="submit" class="btn btn-info" th:text="#{提交}">Submit</button>
				  </div>  
				</form>
			  </div>
			  
	   <div class="owl-team owlcarousel carousel-th" data-autoplay="3000">
        <div class="item" th:each="game:${games}">
          <figure><img src="/assets/images/1.jpg" width="440" height="290" th:src="${game.coverImage}" alt="" /></figure>
          <div class="image-caption text-center">
            <h3 class="post-title upper" th:text="${game.gameName}">产品名称</h3>
            <div class="meta">Sales Manager</div>
            <p th:text="${game.summary}">产品内容简介</p>
            <p><i class="icon-heart-empty-1"></i></p>
            <div th:switch="#{Locale}">
               <div th:case="'cn'">
		            <ul class="social" th:if="${__userInfo}">
		              <li><a th:id="${game.id}" tabindex="0" role="button" data-toggle="popover" th:attr="data-game-name=${game.gameName}" ><i class="csicon-rweichat"></i></a></li>
		              <li><a href="#"><i class="csicon-rqq"></i></a></li>
		              <li><a href="#"><i class="csicon-rqzone"></i></a></li>
		              <li><a href="#" class="linkcopy" data-clipboard-text="123456"  aria-label="复制成功！"><i class="budicon-link-external"></i></a></li>
		            </ul>
               </div>
            </div>
            <a th:unless="${__userInfo}" class="btn btn-lg btn-primary" href="/login" th:text="#{马上开始赚钱}">马上开始赚钱</a>
          </div>
        </div>
        <!-- /.item --> 
      </div>
      <!-- /.owlcarousel -->
      <div class="portfolio fix-portfolio"> 
	      <ul class="items col4" id="gamelist">
	         <li class="item thumb graphic imgli">
	            <figure><a href="portfolio-post.html">
	              <div class="text-overlay">
	                <div class="info">选择图片</div>
	              </div>
	              <img src="style/images/art/p1.jpg"  th:src="@{/style/images/art/p1.jpg}" alt="" /></a></figure>
	              <div class="image-caption imginfo">
			          <div class="date-wrapper imgdel">
			            <button style="padding: 3px 5px;" type="button" class="btn btn-red btn-xs"><span class="glyphicon glyphicon-remove"></span>删除图片</button>
			          </div>
			          <div><span>图片信息:</span><span>bd_logo1.png</span></div>
			          <div><span>创建时间:</span><span>2017-05-15</span></div>
		          </div>
	          </li>
	          <li class="item thumb graphic imgli">
	            <figure><a href="portfolio-post.html">
	              <div class="text-overlay">
	                <div class="info">选择图片</div>
	              </div>
	              <img src="style/images/art/p1.jpg"  th:src="@{/style/images/art/p1.jpg}" alt="" /></a></figure>
	              <div class="image-caption imginfo">
			          <div class="date-wrapper imgdel">
			            <button style="padding: 3px 5px;" type="button" class="btn btn-red btn-xs"><span class="glyphicon glyphicon-remove"></span>删除图片</button>
			          </div>
			          <div><span>图片信息:</span><span>bd_logo1.png</span></div>
			          <div><span>创建时间:</span><span>2017-05-15</span></div>
		          </div>
	          </li>
	          <li class="item thumb graphic imgli">
	            <figure><a href="portfolio-post.html">
	              <div class="text-overlay">
	                <div class="info">选择图片</div>
	              </div>
	              <img src="style/images/art/p1.jpg"  th:src="@{/style/images/art/p1.jpg}" alt="" /></a></figure>
	              <div class="image-caption imginfo">
			          <div class="date-wrapper imgdel">
			            <button style="padding: 3px 5px;" type="button" class="btn btn-red btn-xs"><span class="glyphicon glyphicon-remove"></span>删除图片</button>
			          </div>
			          <div><span>图片信息:</span><span>bd_logo1.png</span></div>
			          <div><span>创建时间:</span><span>2017-05-15</span></div>
		          </div>
	          </li>
	          <li class="item thumb graphic imgli">
	            <figure><a href="portfolio-post.html">
	              <div class="text-overlay">
	                <div class="info">选择图片</div>
	              </div>
	              <img src="style/images/art/p1.jpg"  th:src="@{/style/images/art/p1.jpg}" alt="" /></a></figure>
	              <div class="image-caption imginfo">
			          <div class="date-wrapper imgdel">
			            <button style="padding: 3px 5px;" type="button" class="btn btn-red btn-xs"><span class="glyphicon glyphicon-remove"></span>删除图片</button>
			          </div>
			          <div><span>图片信息:</span><span>bd_logo1.png</span></div>
			          <div><span>创建时间:</span><span>2017-05-15</span></div>
		          </div>
	          </li>
	          <li class="item thumb graphic imgli">
	            <figure><a href="portfolio-post.html">
	              <div class="text-overlay">
	                <div class="info">选择图片</div>
	              </div>
	              <img src="style/images/art/p1.jpg"  th:src="@{/style/images/art/p1.jpg}" alt="" /></a></figure>
	              <div class="image-caption imginfo">
			          <div class="date-wrapper imgdel">
			            <button style="padding: 3px 5px;" type="button" class="btn btn-red btn-xs"><span class="glyphicon glyphicon-remove"></span>删除图片</button>
			          </div>
			          <div><span>图片信息:</span><span>bd_logo1.png</span></div>
			          <div><span>创建时间:</span><span>2017-05-15</span></div>
		          </div>
	          </li>
	          <li class="item thumb graphic imgli">
	            <figure><a href="portfolio-post.html">
	              <div class="text-overlay">
	                <div class="info">选择图片</div>
	              </div>
	              <img src="style/images/art/p1.jpg"  th:src="@{/style/images/art/p1.jpg}" alt="" /></a></figure>
	              <div class="image-caption imginfo">
			          <div class="date-wrapper imgdel">
			            <button style="padding: 3px 5px;" type="button" class="btn btn-red btn-xs"><span class="glyphicon glyphicon-remove"></span>删除图片</button>
			          </div>
			          <div><span>图片信息:</span><span>bd_logo1.png</span></div>
			          <div><span>创建时间:</span><span>2017-05-15</span></div>
		          </div>
	          </li>
	          <li class="item thumb graphic imgli">
	            <figure><a href="portfolio-post.html">
	              <div class="text-overlay">
	                <div class="info">选择图片</div>
	              </div>
	              <img src="style/images/art/p1.jpg"  th:src="@{/style/images/art/p1.jpg}" alt="" /></a></figure>
	              <div class="image-caption imginfo">
			          <div class="date-wrapper imgdel">
			            <button style="padding: 3px 5px;" type="button" class="btn btn-red btn-xs"><span class="glyphicon glyphicon-remove"></span>删除图片</button>
			          </div>
			          <div><span>图片信息:</span><span>bd_logo1.png</span></div>
			          <div><span>创建时间:</span><span>2017-05-15</span></div>
		          </div>
	          </li>
	          <li class="item thumb graphic imgli">
	            <figure><a href="portfolio-post.html">
	              <div class="text-overlay">
	                <div class="info">选择图片</div>
	              </div>
	              <img src="style/images/art/p1.jpg"  th:src="@{/style/images/art/p1.jpg}" alt="" /></a></figure>
	              <div class="image-caption imginfo">
			          <div class="date-wrapper imgdel">
			            <button style="padding: 3px 5px;" type="button" class="btn btn-red btn-xs"><span class="glyphicon glyphicon-remove"></span>删除图片</button>
			          </div>
			          <div><span>图片信息:</span><span>bd_logo1.png</span></div>
			          <div><span>创建时间:</span><span>2017-05-15</span></div>
		          </div>
	          </li>
	          
	          
	      </ul>
      </div>
      <div id="more"><a href="#">更多</a></div>
      <div class="col-center-block"><p id="tips" th:text="#{向下滑动加载更多}"></p></div>
      <!-- 游戏列表api --> 
      <div id="navi"><a th:href="@{/api/mygamelist.json?page=1}"></a></div>
      
		</div>
	  </div>
   </div>
   
<script th:fragment="javascript" th:inline="javascript">
$(function () {
 
    $('#gamelist').infinitescroll({
       navSelector: "#navi", //导航的选择器，会被隐藏
       nextSelector: "#navi a", //包含下一页链接的选择器
       itemSelector: ".item.thumb", //你将要取回的选项(内容块)
       debug: true, //启用调试信息
       animate: false, //当有新数据加载进来的时候，页面是否有动画效果，默认没有
       extraScrollPx: 10, //滚动条距离底部多少像素的时候开始加载，默认150
       bufferPx: 40, //载入信息的显示时间，时间越大，载入信息显示时间越短
       pixelsFromNavToBottom: 20,
       errorCallback: function() {
           //alert('error');
           $('#more').remove();
           $("#tips").html([[#{"数据加载完毕"}]]);
       }, //当出错的时候，比如404页面的时候执行的函数
       localMode: true, //是否允许载入具有相同函数的页面，默认为false
       dataType: 'json',//可以是json
       template: function(data) {
       	console.log(data);
       	//data表示服务端返回的json格式数据，这里需要把data转换成瀑布流块的html格式，然后返回给回到函数
       	var content = '';
       	for (var i in data)
       	{	
	       	content += ' <li class="item thumb graphic" > '
	       		+ ' <figure><a href="portfolio-post.html">'
	       		+ ' <img  style="height:207.266px" src="/assets/images/' + data[i].coverImage +'" alt="" /></a></figure>'
	       		+ ' <div class="image-caption text-center">'
	       		+ ' <h4 class="post-title upper"><a href="portfolio-post.html">' + data[i].gameName + '</a></h4>'
	       		+ ' <div class="meta"> <span class="categories"><a href="#">' + data[i].summary + '</a>, <a href="#">'+ '</a></span> </div>'
	       		+ ' <p>' + '' + '</p>'
	       		+ ' </div>'
	       	 + ' </li> ';
       	}
       	return content;
      },
       loading: {
           msgText: "加载中...",
           finishedMsg: '没有新数据了...',
           img: '/style/images/rotationing.gif',
           //selector: '.loading' // 显示loading信息的div
       }
	   }, function(newElems) {
	       //程序执行完的回调函数
	       var $newElems = $(newElems);
	       //$('.wrapper:eq(1)').masonry('appended', $newElems);
	       $("#gamelist").append($newElems).isotope( 'appended', $newElems);
	   });

    // 取消scroll绑定
    $(window).unbind('.infscr');
    // 手动点击的元素
    jQuery('#more a').click(function(){
        jQuery('#gamelist').infinitescroll('retrieve');
     return false;
    });

});
</script>

<script th:fragment="javascript" src="style/js/jquery.infinitescroll.min.js" th:src="@{/style/js/jquery.infinitescroll.min.js}"></script>  
</body>
</html>